<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Investment Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 20px;
}

h2 {
    margin-bottom: 12px;
}

.section {
    background: #ffffff;
    padding: 20px;
    margin-bottom: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.cards {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}

.card {
    flex: 1;
    min-width: 220px;
    padding: 18px;
    border-radius: 10px;
    font-size: 18px;
    font-weight: bold;
    color: #000;
}

.gold {
    background: linear-gradient(135deg, #f9d976, #f39c12);
}

.silver {
    background: linear-gradient(135deg, #ecf0f1, #bdc3c7);
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

th, td {
    padding: 12px;
    border-bottom: 1px solid #ddd;
    text-align: center;
}

th {
    background: #222;
    color: #fff;
}

.profit {
    color: green;
    font-weight: bold;
}

.loss {
    color: red;
    font-weight: bold;
}

.summary {
    display: flex;
    gap: 20px;
    margin-top: 20px;
    flex-wrap: wrap;
}

.summary div {
    background: #f1f1f1;
    padding: 15px;
    border-radius: 10px;
    font-weight: bold;
}
</style>
</head>

<body>

<!-- ================= GOLD & SILVER ================= -->
<div class="section">
<h2>ðŸ¥‡ Gold & Silver Live Price (INR / 10g)</h2>

<div class="cards">
    <div class="card gold">
        Gold (10g): â‚¹ <span id="goldPrice">Loading...</span>
    </div>
    <div class="card silver">
        Silver (10g): â‚¹ <span id="silverPrice">Loading...</span>
    </div>
</div>
</div>

<!-- ================= STOCK PORTFOLIO ================= -->
<div class="section">
<h2>ðŸ“ˆ Stock Market Investment Tracker</h2>

<table>
<thead>
<tr>
<th>Stock</th>
<th>Qty</th>
<th>Avg Price</th>
<th>Invested (â‚¹)</th>
<th>Live Price</th>
<th>Current Value (â‚¹)</th>
<th>P/L (â‚¹)</th>
</tr>
</thead>
<tbody id="stockTable"></tbody>
</table>

<div class="summary">
<div>ðŸ’° Total Invested: â‚¹ <span id="totalInvested">0</span></div>
<div>ðŸ“Š Current Value: â‚¹ <span id="totalCurrent">0</span></div>
<div>ðŸ“‰ Total P/L: â‚¹ <span id="totalPL">0</span></div>
</div>
</div>

<script>
/* ================= GOLD & SILVER ================= */
function loadMetals() {
    fetch("https://api.metals.live/v1/spot")
    .then(res => res.json())
    .then(data => {
        document.getElementById("goldPrice").innerText =
            (data.gold * 0.3215).toFixed(2);
        document.getElementById("silverPrice").innerText =
            (data.silver * 0.3215).toFixed(2);
    })
    .catch(() => {
        document.getElementById("goldPrice").innerText = "Error";
        document.getElementById("silverPrice").innerText = "Error";
    });
}
loadMetals();

/* ================= STOCK DATA ================= */
const stocks = [
    { name: "ADANI TOTAL GAS", symbol: "ATGL.NS", qty: 149, avg: 754.52 },
    { name: "INFIBEAM AVENUES", symbol: "INFIBEAM.NS", qty: 9500, avg: 24.83 },
    { name: "SUZLON ENERGY", symbol: "SUZLON.NS", qty: 2317, avg: 41 },
    { name: "TATA GOLD ETF", symbol: "GOLDCASE.NS", qty: 142, avg: 9.38 },
    { name: "TATA SILVER ETF", symbol: "SILVERCASE.NS", qty: 144, avg: 10.91 }
];

async function loadStocks() {
    let totalInvested = 0;
    let totalCurrent = 0;

    const tbody = document.getElementById("stockTable");
    tbody.innerHTML = "";

    for (let s of stocks) {
        const res = await fetch(
            `https://query1.finance.yahoo.com/v7/finance/quote?symbols=${s.symbol}`
        );
        const data = await res.json();
        const price =
            data.quoteResponse.result[0]?.regularMarketPrice || 0;

        const invested = s.qty * s.avg;
        const current = s.qty * price;
        const pl = current - invested;

        totalInvested += invested;
        totalCurrent += current;

        tbody.innerHTML += `
        <tr>
            <td>${s.name}</td>
            <td>${s.qty}</td>
            <td>â‚¹${s.avg}</td>
            <td>â‚¹${invested.toFixed(0)}</td>
            <td>â‚¹${price}</td>
            <td>â‚¹${current.toFixed(0)}</td>
            <td class="${pl >= 0 ? 'profit' : 'loss'}">
                â‚¹${pl.toFixed(0)}
            </td>
        </tr>`;
    }

    document.getElementById("totalInvested").innerText =
        totalInvested.toFixed(0);
    document.getElementById("totalCurrent").innerText =
        totalCurrent.toFixed(0);
    document.getElementById("totalPL").innerText =
        (totalCurrent - totalInvested).toFixed(0);
}

loadStocks();

/* Auto refresh every 30 seconds */
setInterval(() => {
    loadMetals();
    loadStocks();
}, 30000);
</script>

</body>
</html>
